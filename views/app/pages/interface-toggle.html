<!DOCTYPE html>
<html lang="en" data-lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interface Toggle - IQX</title>
    
    <!-- Font System -->
    <link rel="stylesheet" href="css/fonts.css">
    
    <!-- Language Support -->
    <link rel="stylesheet" href="css/rtl.css">
    <script src="js/language.js"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Design System Variables */
        :root {
            --color-primary: #6366f1;
            --color-secondary: #8b5cf6;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-danger: #ef4444;
            --color-buy: #10b981;
            --color-sell: #ef4444;
            
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --bg-elevated: #0f3460;
            
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --text-success: #10b981;
            --text-warning: #f59e0b;
            --text-danger: #ef4444;
            
            --border-color: #27272a;
            --border-light: #3f3f46;
            
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
        }
        
        body {
            font-family: var(--font-body-en), -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title {
            font-family: var(--font-heading-en);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .toggle-section {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 40px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        .toggle-button {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: var(--radius-lg);
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }
        
        .toggle-button:active {
            transform: translateY(0);
        }
        
        .toggle-button .icon {
            margin-right: 10px;
            font-size: 1.1rem;
        }
        
        .status-section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .status-title {
            font-family: var(--font-heading-en);
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .status-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .status-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .status-value {
            font-family: var(--font-numbers-en);
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--color-success);
        }
        
        .currency-section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .currency-title {
            font-family: var(--font-heading-en);
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }
        
        .currency-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 10px;
        }
        
        .currency-label {
            font-weight: 500;
        }
        
        .currency-value {
            font-family: var(--font-numbers-en);
            font-weight: 600;
            color: var(--color-success);
        }
        
        .demo-section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 20px;
        }
        
        .demo-title {
            font-family: var(--font-heading-en);
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--color-primary);
        }
        
        .demo-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* RTL Adjustments */
        [dir="rtl"] .title {
            font-family: var(--font-heading-ar);
        }
        
        [dir="rtl"] .status-title,
        [dir="rtl"] .currency-title,
        [dir="rtl"] .demo-title {
            font-family: var(--font-heading-ar);
        }
        
        [dir="rtl"] .toggle-button {
            font-family: var(--font-body-ar);
        }
        
        [dir="rtl"] .status-value,
        [dir="rtl"] .currency-value {
            font-family: var(--font-numbers-ar);
        }
        
        [dir="rtl"] .status-label,
        [dir="rtl"] .currency-label,
        [dir="rtl"] .demo-content {
            font-family: var(--font-body-ar);
        }
        
        /* Animation for toggle */
        .toggle-animation {
            animation: togglePulse 0.5s ease-in-out;
        }
        
        @keyframes togglePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Responsive Design */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .toggle-section {
                padding: 20px;
            }
            
            .toggle-button {
                padding: 15px 30px;
                font-size: 1rem;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title" data-i18n="interface_toggle">Interface Toggle</h1>
            <p class="subtitle" data-i18n="toggle_subtitle">Switch between English and Arabic interfaces with currency changes</p>
        </div>
        
        <div class="toggle-section">
            <button class="toggle-button" onclick="toggleInterface()" id="toggle-btn">
                <i class="fas fa-globe icon"></i>
                <span id="toggle-text">Switch to Arabic</span>
            </button>
        </div>
        
        <div class="status-section">
            <h3 class="status-title" data-i18n="current_status">Current Status</h3>
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-label" data-i18n="language">Language</div>
                    <div class="status-value" id="current-language">English</div>
                </div>
                <div class="status-item">
                    <div class="status-label" data-i18n="currency">Currency</div>
                    <div class="status-value" id="current-currency">USD</div>
                </div>
                <div class="status-item">
                    <div class="status-label" data-i18n="direction">Direction</div>
                    <div class="status-value" id="current-direction">LTR</div>
                </div>
                <div class="status-item">
                    <div class="status-label" data-i18n="font">Font</div>
                    <div class="status-value" id="current-font">English</div>
                </div>
            </div>
        </div>
        
        <div class="currency-section">
            <h3 class="currency-title" data-i18n="currency_display">Currency Display</h3>
            <div class="currency-display">
                <span class="currency-label" data-i18n="balance">Balance:</span>
                <span class="currency-value" id="balance-display">$1,250.00</span>
            </div>
            <div class="currency-display">
                <span class="currency-label" data-i18n="price">Price:</span>
                <span class="currency-value" id="price-display">$99.50</span>
            </div>
            <div class="currency-display">
                <span class="currency-label" data-i18n="fee">Fee:</span>
                <span class="currency-value" id="fee-display">$2.50</span>
            </div>
        </div>
        
        <div class="demo-section">
            <h3 class="demo-title" data-i18n="how_it_works">How It Works</h3>
            <div class="demo-content" data-i18n="demo_explanation">
                Click the toggle button above to switch between English and Arabic interfaces. 
                The system will automatically change the language, currency, text direction, and fonts.
                All changes are saved to your browser's local storage and will persist across page reloads.
            </div>
        </div>
    </div>
    
    <script>
        let currentInterface = 'en';
        let currentCurrency = 'USD';
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Interface toggle page loaded');
            
            // Initialize language manager
            if (window.LanguageManager) {
                window.languageManager = new LanguageManager();
                console.log('Language manager initialized');
            } else {
                console.log('Language manager not found');
            }
            
            // Load saved preferences
            loadSavedPreferences();
            
            // Update display
            updateInterfaceDisplay();
        });
        
        function toggleInterface() {
            console.log('Toggle interface called');
            
            // Add animation
            const button = document.getElementById('toggle-btn');
            button.classList.add('toggle-animation');
            setTimeout(() => button.classList.remove('toggle-animation'), 500);
            
            // Toggle interface
            if (currentInterface === 'en') {
                switchToArabic();
            } else {
                switchToEnglish();
            }
        }
        
        function switchToArabic() {
            console.log('Switching to Arabic interface');
            currentInterface = 'ar';
            
            // Update language manager
            if (window.languageManager) {
                window.languageManager.setLanguage('ar');
            }
            
            // Update currency
            currentCurrency = 'IQD';
            updateCurrencyDisplays('IQD');
            
            // Save preferences
            savePreferences();
            
            // Update display
            updateInterfaceDisplay();
            
            console.log('Switched to Arabic interface');
        }
        
        function switchToEnglish() {
            console.log('Switching to English interface');
            currentInterface = 'en';
            
            // Update language manager
            if (window.languageManager) {
                window.languageManager.setLanguage('en');
            }
            
            // Update currency
            currentCurrency = 'USD';
            updateCurrencyDisplays('USD');
            
            // Save preferences
            savePreferences();
            
            // Update display
            updateInterfaceDisplay();
            
            console.log('Switched to English interface');
        }
        
        function updateCurrencyDisplays(currency) {
            if (currency === 'USD') {
                document.getElementById('balance-display').textContent = '$1,250.00';
                document.getElementById('price-display').textContent = '$99.50';
                document.getElementById('fee-display').textContent = '$2.50';
            } else {
                document.getElementById('balance-display').textContent = '1,850,000 IQD';
                document.getElementById('price-display').textContent = '147,260 IQD';
                document.getElementById('fee-display').textContent = '3,700 IQD';
            }
        }
        
        function updateInterfaceDisplay() {
            // Update toggle button
            const toggleText = document.getElementById('toggle-text');
            const toggleIcon = document.querySelector('.toggle-button .icon');
            
            if (currentInterface === 'en') {
                toggleText.textContent = 'Switch to Arabic';
                toggleIcon.className = 'fas fa-globe icon';
            } else {
                toggleText.textContent = 'التبديل إلى الإنجليزية';
                toggleIcon.className = 'fas fa-globe icon';
            }
            
            // Update status displays
            document.getElementById('current-language').textContent = currentInterface === 'en' ? 'English' : 'العربية';
            document.getElementById('current-currency').textContent = currentCurrency;
            document.getElementById('current-direction').textContent = currentInterface === 'en' ? 'LTR' : 'RTL';
            document.getElementById('current-font').textContent = currentInterface === 'en' ? 'English' : 'العربية';
        }
        
        function savePreferences() {
            try {
                localStorage.setItem('interface_language', currentInterface);
                localStorage.setItem('interface_currency', currentCurrency);
                console.log('Preferences saved:', { language: currentInterface, currency: currentCurrency });
            } catch (error) {
                console.error('Failed to save preferences:', error);
            }
        }
        
        function loadSavedPreferences() {
            try {
                const savedLanguage = localStorage.getItem('interface_language');
                const savedCurrency = localStorage.getItem('interface_currency');
                
                if (savedLanguage) {
                    currentInterface = savedLanguage;
                    console.log('Loaded saved language:', savedLanguage);
                }
                
                if (savedCurrency) {
                    currentCurrency = savedCurrency;
                    console.log('Loaded saved currency:', savedCurrency);
                }
                
                // Apply saved preferences
                if (currentInterface === 'ar') {
                    switchToArabic();
                } else {
                    switchToEnglish();
                }
            } catch (error) {
                console.error('Failed to load preferences:', error);
            }
        }
        
        // Add translations for the interface toggle
        if (window.languageManager) {
            // English translations
            window.languageManager.translations.en.interface_toggle = 'Interface Toggle';
            window.languageManager.translations.en.toggle_subtitle = 'Switch between English and Arabic interfaces with currency changes';
            window.languageManager.translations.en.current_status = 'Current Status';
            window.languageManager.translations.en.language = 'Language';
            window.languageManager.translations.en.currency = 'Currency';
            window.languageManager.translations.en.direction = 'Direction';
            window.languageManager.translations.en.font = 'Font';
            window.languageManager.translations.en.currency_display = 'Currency Display';
            window.languageManager.translations.en.balance = 'Balance:';
            window.languageManager.translations.en.price = 'Price:';
            window.languageManager.translations.en.fee = 'Fee:';
            window.languageManager.translations.en.how_it_works = 'How It Works';
            window.languageManager.translations.en.demo_explanation = 'Click the toggle button above to switch between English and Arabic interfaces. The system will automatically change the language, currency, text direction, and fonts. All changes are saved to your browser\'s local storage and will persist across page reloads.';
            
            // Arabic translations
            window.languageManager.translations.ar.interface_toggle = 'تبديل الواجهة';
            window.languageManager.translations.ar.toggle_subtitle = 'بدّل بين الواجهات الإنجليزية والعربية مع تغيير العملة';
            window.languageManager.translations.ar.current_status = 'الحالة الحالية';
            window.languageManager.translations.ar.language = 'اللغة';
            window.languageManager.translations.ar.currency = 'العملة';
            window.languageManager.translations.ar.direction = 'الاتجاه';
            window.languageManager.translations.ar.font = 'الخط';
            window.languageManager.translations.ar.currency_display = 'عرض العملة';
            window.languageManager.translations.ar.balance = 'الرصيد:';
            window.languageManager.translations.ar.price = 'السعر:';
            window.languageManager.translations.ar.fee = 'الرسوم:';
            window.languageManager.translations.ar.how_it_works = 'كيف يعمل';
            window.languageManager.translations.ar.demo_explanation = 'انقر على زر التبديل أعلاه للتبديل بين الواجهات الإنجليزية والعربية. سيقوم النظام تلقائياً بتغيير اللغة والعملة واتجاه النص والخطوط. يتم حفظ جميع التغييرات في التخزين المحلي للمتصفح وستستمر عبر إعادة تحميل الصفحة.';
        }
    </script>
</body>
</html> 